window.addEvent("load",function(){$$(".nspMain").each(function(d){if(!d.hasClass("activated")){d.addClass("activated");var n=$Gavick[d.getProperty("id")];var l=0;var r=0;var b=0;var p=0;var j=d.getElements(".nspArt");var e=(d.getElement(".nspLinkScroll1"))?d.getElement(".nspLinkScroll1").getElements("li"):[];var g=d.getElement(".nspArt")?j[0].getStyle("width"):null;var h=n.news_column*n.news_rows;var f=Math.ceil(j.length/h);var s=Math.ceil(Math.ceil(e.length/n.links_amount)/n.links_columns_amount);var m=d.hasClass("hover");var o=true;var i;var k;var q=d.getProperty("data-direction")=="rtl"?"margin-right":"margin-left";var c={top:d.getElement(".nspTopInterface"),bottom:d.getElement(".nspBotInterface")};if(j.length>0){b=100;i=new Fx.Tween(d.getElement(".nspArtScroll2"),{duration:n.animation_speed,wait:false,property:q,unit:"%",transition:n.animation_function})}if(e.length>0){p=100;k=new Fx.Tween(d.getElement(".nspLinkScroll2"),{duration:n.animation_speed,wait:false,property:q,unit:"%",transition:n.animation_function})}a(0,d,c.top,f);a(0,d,c.bottom,s);if(c.top&&c.top.getElement(".nspPagination")){c.top.getElement(".nspPagination").getElements("li").each(function(u,t){u.addEvent(m?"mouseenter":"click",function(){i.start(-1*t*b);l=t;a(t,d,c.top,f);o=false;(function(){o=true}).delay(n.animation_interval*0.8)})})}if(c.top&&c.top.getElement(".nspPrev")){c.top.getElement(".nspPrev").addEvent("click",function(){if(l==0){l=f-1}else{l--}i.start(-1*l*b);a(l,d,c.top,f);o=false;(function(){o=true}).delay(n.animation_interval*0.8)});c.top.getElement(".nspNext").addEvent("click",function(){if(l==f-1){l=0}else{l++}i.start(-1*l*b);a(l,d,c.top,f);o=false;(function(){o=true}).delay(n.animation_interval*0.8)})}if(c.bottom&&c.bottom.getElement(".nspPagination")){c.bottom.getElement(".nspPagination").getElements("li").each(function(u,t){u.addEvent(m?"mouseenter":"click",function(){k.start(-1*t*p);r=t;a(t,d,c.bottom,s)})})}if(c.bottom&&c.bottom.getElement(".nspPrev")){c.bottom.getElement(".nspPrev").addEvent("click",function(){if(r==0){r=s-1}else{r--}k.start(-1*r*p);a(r,d,c.bottom,s)});c.bottom.getElement(".nspNext").addEvent("click",function(){if(r==s-1){r=0}else{r++}k.start(-1*r*p);a(r,d,c.bottom,s)})}if(d.hasClass("autoanim")){(function(){if(c.top&&c.top.getElement(".nspNext")){if(o){c.top.getElement(".nspNext").fireEvent("click")}}else{if(l==f-1){l=0}else{l++}i.start(-1*l*b);a(l,d,c.top,f)}}).periodical(n.animation_interval)}}});function a(f,e,b,d){if(b&&b.getElement(".nspPagination")){var c=b.getElement(".nspPagination");c.getElements("li").setProperty("class","");c.getElements("li")[f].setProperty("class","active")}if(b&&b.getElement(".nspCounter")){b.getElement(".nspCounter").getElement("span").innerHTML=(f+1)+" / "+d}}});